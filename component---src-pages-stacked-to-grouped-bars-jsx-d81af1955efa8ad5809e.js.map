{"version":3,"sources":["webpack:///./src/pages/stacked-to-grouped-bars.jsx","webpack:///./src/components/Footer/index.js","webpack:///./src/components/Footer/Footer.jsx","webpack:///./src/components/Header/index.js","webpack:///./src/components/Header/Header.jsx","webpack:///./src/components/Layout/Layout.jsx","webpack:///./src/components/Layout/index.js"],"names":["palette","bumps","m","i","j","w","x","y","z","values","Math","random","exp","max","IndexPage","props","state","updateBar","xz","d3__WEBPACK_IMPORTED_MODULE_4__","k","yz","map","y01z","r","keys","v","yMax","y1Max","d","svg","p","width","attr","height","g","append","l","domain","rangeRound","padding","range","color","n","rect","selectAll","data","enter","bandwidth","a","parentNode","dataset","index","transition","delay","call","tickSize","tickPadding","timeout","t","property","dispatch","on","stop","value","duration","changed","componentDidMount","this","render","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","_components_Layout__WEBPACK_IMPORTED_MODULE_5__","className","type","name","checked","style","display","margin","e","Component","__webpack_exports__","default","236","238","o","c","components_Footer","react_default","Segment","vertical","Container","s","components_Header","Menu","size","Item","as","gatsby_link_default","to","position","Dropdown","item","text","components_Layout_Layout","Helmet_default","title","meta","content","children","f"],"mappings":"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","file":"component---src-pages-stacked-to-grouped-bars-jsx-d81af1955efa8ad5809e.js","sourcesContent":["// @flow\n\nimport React from 'react'\n// $FlowIgnore\nimport * as d3 from 'd3'\n\nimport Layout from '../components/Layout'\n// $FlowIgnore\n// import './axis-styling.scss'\n\ntype Props = {\n  value: string,\n}\n\ntype State = {\n  value: string,\n}\n\nconst palette = [\n  '#3182bd',\n  '#6baed6',\n  '#9ecae1',\n  '#c6dbef',\n]\n// Returns an array of m psuedorandom, smoothly-varying non-negative numbers.\n// Inspired by Lee Byron’s test data generator.\n// http://leebyron.com/streamgraph/\nconst bumps = (m) => {\n  const values = []\n  let i\n  let j\n  let w\n  let x\n  let y\n  let z\n\n  // Initialize with uniform random values in [0.1, 0.2).\n  for (i = 0; i < m; i += 1) {\n    values[i] = 0.1 + 0.1 * Math.random()\n  }\n\n  // Add five random bumps.\n  for (j = 0; j < 5; j += 1) {\n    x = 1 / (0.1 + Math.random())\n    y = 2 * Math.random() - 0.5\n    z = 10 / (0.1 + Math.random())\n    for (i = 0; i < m; i += 1) {\n      w = (i / m - y) * z\n      values[i] += x * Math.exp(-w * w)\n    }\n  }\n\n  // Ensure all values are positive.\n  for (i = 0; i < m; i += 1) {\n    values[i] = Math.max(0, values[i])\n  }\n\n  return values\n}\n\nclass IndexPage extends React.Component<Props, State> {\n  props: Props\n\n  state: State\n\n  componentDidMount() {\n    this.updateBar()\n  }\n\n  updateBar = () => {\n    // example from http://bl.ocks.org/mbostock/3943967\n\n    const n = 4 // The number of series.\n\n    const m = 58 // The number of values per series.\n\n    // The xz array has m elements, representing the x-values shared by all series.\n    // The yz array has n elements, representing the y-values of each of the n series.\n    // Each yz[i] is an array of m non-negative numbers representing a y-value for xz[i].\n    // The y01z array has the same structure as yz, but with stacked [y₀, y₁] instead of y.\n    const xz = d3.range(m)\n    const yz = d3.range(n)\n      .map(() => bumps(m))\n\n    const y01z = d3.stack()\n      .keys(d3.range(n))(d3.transpose(yz))\n    const yMax = d3.max(yz, y => d3.max(y))\n    const y1Max = d3.max(y01z, y => d3.max(y, d => d[1]))\n\n    const svg = d3.select('svg')\n\n    const margin = {\n      top: 40,\n      right: 10,\n      bottom: 20,\n      left: 10,\n    }\n    const width = +svg.attr('width') - margin.left - margin.right\n    const height = +svg.attr('height') - margin.top - margin.bottom\n\n    const g = svg.append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`)\n\n    const x = d3.scaleBand()\n      .domain(xz)\n      .rangeRound([0, width])\n      .padding(0.08)\n\n    const y = d3.scaleLinear()\n      .domain([0, y1Max])\n      .range([height, 0])\n\n    const color = d3.scaleOrdinal()\n      .domain(d3.range(n))\n      .range(palette)\n\n    const series = g.selectAll('g.series')\n      .data(y01z)\n      .enter().append('g')\n      .attr('fill', (d, i) => color(i))\n      .attr('class', 'series')\n      .attr('data-index', (d, i) => i)\n\n    const rect = series.selectAll('rect')\n      .data(d => d)\n      .enter().append('rect')\n      .attr('x', (d, i) => x(i))\n      .attr('y', height)\n      .attr('width', x.bandwidth())\n      .attr('height', 0)\n      // getting properties from the parent node\n      .attr('data-index', (d, i, a) => a[i].parentNode.dataset.index)\n\n\n    const transitionGrouped = () => {\n      y.domain([0, yMax])\n\n      rect.transition()\n        .duration(500)\n        .delay((d, i) => i * 10)\n        // getting properties from the actual node\n        .attr('x', (d, i, a) => x(i) + x.bandwidth() / n * a[i].dataset.index)\n        .attr('width', x.bandwidth() / n)\n        .transition()\n        .attr('y', d => y(d[1] - d[0]))\n        .attr('height', d => y(0) - y(d[1] - d[0]))\n    }\n\n    const transitionStacked = () => {\n      y.domain([0, y1Max])\n\n      rect.transition()\n        .duration(500)\n        .delay((d, i) => i * 10)\n        .attr('y', d => y(d[1]))\n        .attr('height', d => y(d[0]) - y(d[1]))\n        .transition()\n        .attr('x', (d, i) => x(i))\n        .attr('width', x.bandwidth())\n    }\n\n    rect.transition()\n      .delay((d, i) => i * 10)\n      .attr('y', d => y(d[1]))\n      .attr('height', d => y(d[0]) - y(d[1]))\n\n    g.append('g')\n      .attr('class', 'axis axis--x')\n      .attr('transform', `translate(0,${height})`)\n      .call(d3.axisBottom(x)\n        .tickSize(0)\n        .tickPadding(6))\n\n    const timeout = d3.timeout(() => {\n      d3.select('input[value=\"grouped\"]')\n        .property('checked', true)\n        .dispatch('change')\n    }, 2000)\n\n\n    const changed = (t) => {\n      timeout.stop()\n      if (t.value === 'grouped') transitionGrouped()\n      else transitionStacked()\n    }\n\n    d3.select('.stacked-to-grouped-bars')\n      .selectAll('input')\n      .on('change', (d, i, a) => changed(a[i]))\n  }\n\n  render() {\n    return (\n      <Layout>\n        <div className=\"stacked-to-grouped-bars\">\n          <label><input type=\"radio\" name=\"mode\" value=\"grouped\" /> Grouped</label>\n          <label><input type=\"radio\" name=\"mode\" value=\"stacked\" checked /> Stacked</label>\n          <svg width=\"960\" height=\"500\" style={{ display: 'block', margin: '0 auto' }} />\n        </div>\n      </Layout>\n    )\n  }\n}\n\nexport default IndexPage\n","// @flow\n\nimport Footer from './Footer'\n\nexport default Footer\n","// @flow\n\nimport React from 'react'\n// import Link from 'gatsby-link';\n\nimport {\n  Container,\n  Segment,\n} from 'semantic-ui-react'\n\nconst LayoutFooter = () => (\n  <Segment vertical>\n    <Container>\n      D3 examples\n    </Container>\n  </Segment>\n)\n\nexport default LayoutFooter\n","// @flow\n\nimport Header from './Header'\n\nexport default Header\n","// @flow\n\nimport React from 'react'\n// $FlowIgnore\nimport Link from 'gatsby-link'\n\nimport {\n  Container,\n  Dropdown,\n  Menu,\n  // $FlowIgnore\n} from 'semantic-ui-react'\n\nconst Header = () => (\n  <Menu size=\"large\">\n    <Container>\n      <Menu.Item as={Link} to=\"/\">Home</Menu.Item>\n\n      <Menu.Menu position=\"right\">\n        <Menu.Menu position=\"right\">\n          <Dropdown item text=\"Examples\">\n            <Dropdown.Menu>\n              <Dropdown.Item  as={Link} to=\"/simple-bar-chart\">simple-bar-chart</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/svg-bar-chart\">svg-bar-chart</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/svg-bar-chart-vertical\">svg-bar-chart-vertical</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/general-update-pattern\">general-update-pattern</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/nested-selections\">nested-selections</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/working-with-transitions\">working-with-transitions</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/axis-styling\">axis-styling</Dropdown.Item>\n              <Dropdown.Item  as={Link} to=\"/stacked-to-grouped-bars\">stacked-to-grouped-bars</Dropdown.Item>\n            </Dropdown.Menu>\n          </Dropdown>\n        </Menu.Menu>\n\n      </Menu.Menu>\n    </Container>\n  </Menu>\n)\n\nexport default Header\n","// @flow\n\nimport React from 'react'\nimport type { Node } from 'react'\n// $FlowIgnore\nimport Helmet from 'react-helmet'\nimport {\n  Container,\n} from 'semantic-ui-react'\n\nimport Footer from '../Footer'\nimport Header from '../Header'\n\n\n// $FlowIgnore\nimport 'sanitize.css/sanitize.css'\n// $FlowIgnore\nimport 'semantic-ui-css/semantic.min.css'\n\n// $FlowIgnore\nimport './index.scss'\n\ntype Props = {\n  children: Node\n}\n\nconst Layout = (props: Props): Node => (\n  <div>\n    <Helmet\n      title=\"D3 examples\"\n      meta={[\n        { name: 'description', content: 'D3 examples and tutorials in built with Gatsby react' },\n        { name: 'keywords', content: 'D3, React' },\n      ]}\n    />\n    <Header />\n    <Container>\n      {props.children}\n    </Container>\n    <Footer />\n  </div>\n)\n\nexport default Layout\n","// @flow\n\nimport Layout from './Layout'\n\nexport default Layout\n"],"sourceRoot":""}